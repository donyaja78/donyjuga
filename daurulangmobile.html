<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Recycle AI Pro - Mobile Version</title>
    
    <!-- CSS Files -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="css/style.css">
    
    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- App Scripts -->
    <script src="js/waste-db.js" defer></script>
    <script src="js/leather-db.js" defer></script>
    <script src="js/utils.js" defer></script>
    <script src="js/main.js" defer></script>
</head>
<body>

<!-- Mobile Header -->
<header class="mobile-header">
    <div class="logo">
        <i class="fas fa-recycle logo-icon"></i>
        <span class="logo-text">Recycle AI Pro</span>
    </div>
    <button class="menu-btn" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>
</header>

<!-- Sidebar Navigation -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h3>Menu</h3>
        <button class="close-btn" onclick="toggleSidebar()">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <ul class="nav-list">
        <li class="nav-item">
            <a href="#" class="nav-link active" onclick="showSection('dashboard')">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" onclick="showSection('analyzer')">
                <i class="fas fa-magic"></i>
                <span>AI Analyzer</span>
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" onclick="showSection('leather')">
                <i class="fas fa-paw"></i>
                <span>Leather Analyzer</span>
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" onclick="showSection('team')">
                <i class="fas fa-users"></i>
                <span>Team</span>
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" onclick="showSection('history')">
                <i class="fas fa-history"></i>
                <span>History</span>
            </a>
        </li>
    </ul>
    
    <div class="team-badge">
        <i class="fas fa-user-shield"></i>
        DONI WIJAYA TEAM
    </div>
</aside>

<!-- Main Content -->
<main class="main-content">
    
    <!-- Dashboard Section -->
    <section id="dashboard" class="section active">
        <div class="card">
            <h2 class="mb-3"><i class="fas fa-chart-line"></i> Dashboard Overview</h2>
            
            <div class="grid">
                <div class="stat-card">
                    <i class="fas fa-recycle stat-icon plastic"></i>
                    <div class="stat-value">187</div>
                    <div class="stat-label">Items Recycled</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-paw stat-icon leather"></i>
                    <div class="stat-value">24</div>
                    <div class="stat-label">Leather Items</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-leaf stat-icon plastic"></i>
                    <div class="stat-value">-89kg</div>
                    <div class="stat-label">COâ‚‚ Saved</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-lightbulb stat-icon glass"></i>
                    <div class="stat-value">47</div>
                    <div class="stat-label">Product Ideas</div>
                </div>
            </div>
            
            <div class="mt-3">
                <h5 class="mb-2">Material Distribution</h5>
                <div style="height: 250px;">
                    <canvas id="materialChart"></canvas>
                </div>
            </div>
            
            <div class="mt-3">
                <h5 class="mb-2">Quick Actions</h5>
                <button class="btn btn-primary" onclick="showSection('analyzer')">
                    <i class="fas fa-magic"></i> Analyze Waste
                </button>
                <button class="btn btn-leather" onclick="showSection('leather')">
                    <i class="fas fa-paw"></i> Analyze Leather
                </button>
                <button class="btn btn-primary" onclick="generateFullReport()">
                    <i class="fas fa-file-pdf"></i> Generate Report
                </button>
            </div>
        </div>
    </section>

    <!-- Analyzer Section -->
    <section id="analyzer" class="section">
        <div class="card">
            <h2 class="mb-3"><i class="fas fa-magic"></i> AI Waste Analyzer</h2>
            
            <div class="tabs">
                <div class="tab active" onclick="showTab('upload')">Upload</div>
                <div class="tab" onclick="showTab('url')">URL</div>
                <div class="tab" onclick="showTab('camera')">Camera</div>
            </div>
            
            <!-- Upload Tab -->
            <div id="uploadTab" class="tab-content">
                <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h4>Upload Waste Image</h4>
                    <p>Tap to select file</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFileUpload(event)">
                </div>
                
                <div>
                    <h5 class="mb-2">Common Waste Materials</h5>
                    <div class="grid">
                        <div class="grid-item plastic" onclick="analyzeMaterial('plastic')">
                            <i class="fas fa-wine-bottle"></i>
                            <div>Plastic</div>
                        </div>
                        <div class="grid-item paper" onclick="analyzeMaterial('paper')">
                            <i class="fas fa-file-alt"></i>
                            <div>Paper</div>
                        </div>
                        <div class="grid-item glass" onclick="analyzeMaterial('glass')">
                            <i class="fas fa-wine-glass"></i>
                            <div>Glass</div>
                        </div>
                        <div class="grid-item metal" onclick="analyzeMaterial('metal')">
                            <i class="fas fa-weight"></i>
                            <div>Metal</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- URL Tab -->
            <div id="urlTab" class="tab-content" style="display: none;">
                <div>
                    <h5 class="mb-2">Enter Image URL</h5>
                    <input type="text" 
                           class="input" 
                           id="imageUrl"
                           placeholder="https://example.com/waste-image.jpg"
                           value="https://images.unsplash.com/photo-1589652717521-10c0d092dea9?w=800&auto=format&fit=crop">
                    <button class="btn btn-primary" onclick="loadImageFromUrl()">
                        <i class="fas fa-eye"></i> Preview Image
                    </button>
                    <div id="urlPreview" style="display: none;">
                        <img id="previewImage" class="image-preview" alt="Preview">
                        <button class="btn btn-primary mt-2" onclick="analyzeFromUrl()">
                            <i class="fas fa-magic"></i> Analyze Image
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Camera Tab -->
            <div id="cameraTab" class="tab-content" style="display: none;">
                <div>
                    <h5 class="mb-2">Camera Analysis</h5>
                    <p class="mb-2">Position waste material and capture</p>
                    
                    <div class="camera-container">
                        <video id="cameraFeed" autoplay playsinline></video>
                        <div class="camera-overlay">
                            <div class="scan-line"></div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-between gap-1">
                        <button class="btn btn-outline" onclick="startCamera()" id="startBtn">
                            <i class="fas fa-play"></i> Start
                        </button>
                        <button class="btn btn-outline" onclick="stopCamera()" id="stopBtn" style="display: none;">
                            <i class="fas fa-stop"></i> Stop
                        </button>
                        <button class="btn btn-outline" onclick="switchCamera()" id="switchBtn" style="display: none;">
                            <i class="fas fa-sync"></i> Switch
                        </button>
                        <button class="btn btn-primary" onclick="captureImage()" id="captureBtn" style="display: none;">
                            <i class="fas fa-camera"></i> Capture
                        </button>
                    </div>
                    
                    <div id="cameraPreview" style="display: none;">
                        <canvas id="capturedCanvas" class="image-preview"></canvas>
                        <div class="d-flex gap-1 mt-2">
                            <button class="btn btn-primary" onclick="analyzeCaptured()">
                                <i class="fas fa-magic"></i> Analyze
                            </button>
                            <button class="btn btn-outline" onclick="retakePhoto()">
                                <i class="fas fa-redo"></i> Retake
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Loading -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <h4>Analyzing Material...</h4>
                <p>AI is identifying waste type</p>
                <div class="progress">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- Results -->
            <div id="results" style="display: none;"></div>
        </div>
    </section>

    <!-- Leather Analyzer Section -->
    <section id="leather" class="section">
        <div class="card">
            <h2 class="mb-3"><i class="fas fa-paw leather"></i> Animal Leather Analyzer</h2>
            
            <div class="alert alert-info">
                <i class="fas fa-star"></i>
                <strong>Exclusive Feature:</strong> Doni Wijaya Team - Leather Analysis
            </div>
            
            <div class="mt-3">
                <h5 class="mb-2"><i class="fas fa-link"></i> Step 1: Leather Image URL</h5>
                <input type="text" 
                       class="input" 
                       id="leatherImageUrl"
                       placeholder="https://example.com/leather-image.jpg"
                       value="https://images.unsplash.com/photo-1601924582970-9238bcb495d9?w=800&auto=format&fit=crop">
                
                <h5 class="mt-3 mb-2"><i class="fas fa-cow"></i> Step 2: Select Animal Type</h5>
                <div class="grid">
                    <div class="grid-item" onclick="selectAnimal('cow')" id="cowCard">
                        <i class="fas fa-cow leather"></i>
                        <div>Cow Hide</div>
                        <small>Thick & Durable</small>
                    </div>
                    <div class="grid-item" onclick="selectAnimal('goat')" id="goatCard">
                        <i class="fas fa-vector-square leather"></i>
                        <div>Goat Skin</div>
                        <small>Soft & Fine</small>
                    </div>
                    <div class="grid-item" onclick="selectAnimal('sheep')" id="sheepCard">
                        <i class="fas fa-cloud leather"></i>
                        <div>Sheepskin</div>
                        <small>Light & Warm</small>
                    </div>
                    <div class="grid-item" onclick="selectAnimal('exotic')" id="exoticCard">
                        <i class="fas fa-dragon leather"></i>
                        <div>Exotic</div>
                        <small>Unique Patterns</small>
                    </div>
                </div>
                
                <div class="d-flex gap-1 mt-3">
                    <button class="btn btn-leather" onclick="analyzeLeather()">
                        <i class="fas fa-magic"></i> Analyze Leather
                    </button>
                    <button class="btn btn-outline" onclick="previewLeather()">
                        <i class="fas fa-eye"></i> Preview
                    </button>
                </div>
                
                <div id="leatherPreview" style="display: none;">
                    <img id="leatherPreviewImage" class="image-preview" alt="Leather">
                </div>
                
                <!-- Leather Loading -->
                <div id="leatherLoading" class="loading" style="display: none;">
                    <div class="spinner" style="border-top-color: var(--leather);"></div>
                    <h4>Analyzing Leather...</h4>
                    <p>Detecting animal type and quality</p>
                    <div class="progress">
                        <div class="progress-bar" id="leatherProgress" style="background: linear-gradient(90deg, var(--leather), var(--leather-light)); width: 0%"></div>
                    </div>
                </div>
                
                <!-- Leather Results -->
                <div id="leatherResults" style="display: none;"></div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="section">
        <div class="card">
            <h2 class="mb-3"><i class="fas fa-users"></i> Team Doni Wijaya</h2>
            
            <div class="text-center mb-3">
                <div style="width: 100px; height: 100px; background: linear-gradient(45deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 36px; font-weight: bold;">
                    DW
                </div>
                <h3>DONI WIJAYA</h3>
                <p class="leather">NIM: 231011401207</p>
                
                <div class="d-flex justify-center gap-1 mt-2">
                    <span class="badge badge-success">AI Developer</span>
                    <span class="badge badge-leather">Leather Expert</span>
                    <span class="badge badge-warning">Full Stack</span>
                </div>
            </div>
            
            <div class="mt-3">
                <h5 class="mb-2"><i class="fas fa-star leather"></i> Project Features</h5>
                <div class="grid">
                    <div class="grid-item">
                        <i class="fas fa-recycle plastic"></i>
                        <div>AI Waste Analysis</div>
                        <small>Real-time detection</small>
                    </div>
                    <div class="grid-item">
                        <i class="fas fa-paw leather"></i>
                        <div>Leather Upcycling</div>
                        <small>Product generation</small>
                    </div>
                    <div class="grid-item">
                        <i class="fas fa-camera glass"></i>
                        <div>Camera Processing</div>
                        <small>Live analysis</small>
                    </div>
                    <div class="grid-item">
                        <i class="fas fa-file-pdf metal"></i>
                        <div>PDF Reports</div>
                        <small>Export results</small>
                    </div>
                </div>
            </div>
            
            <div class="mt-3">
                <h5 class="mb-2">Project Statistics</h5>
                <div class="grid">
                    <div class="stat-card">
                        <div class="stat-value">15</div>
                        <div class="stat-label">Features</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">87%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">24/7</div>
                        <div class="stat-label">Availability</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">2024</div>
                        <div class="stat-label">Project Year</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- History Section -->
    <section id="history" class="section">
        <div class="card">
            <h2 class="mb-3"><i class="fas fa-history"></i> Analysis History</h2>
            
            <div class="table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Material</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="historyBody">
                        <!-- History will be loaded here -->
                    </tbody>
                </table>
            </div>
            
            <div class="mt-3">
                <button class="btn btn-primary" onclick="clearHistory()">
                    <i class="fas fa-trash"></i> Clear History
                </button>
                <button class="btn btn-primary mt-1" onclick="exportHistoryPDF()">
                    <i class="fas fa-file-pdf"></i> Export PDF
                </button>
            </div>
        </div>
    </section>
</main>

<!-- Bottom Navigation -->
<nav class="bottom-nav">
    <a href="#" class="nav-btn active" onclick="showSection('dashboard')">
        <i class="fas fa-chart-line"></i>
        <span>Dashboard</span>
    </a>
    <a href="#" class="nav-btn" onclick="showSection('analyzer')">
        <i class="fas fa-magic"></i>
        <span>Analyzer</span>
    </a>
    <a href="#" class="nav-btn" onclick="showSection('leather')">
        <i class="fas fa-paw"></i>
        <span>Leather</span>
    </a>
    <a href="#" class="nav-btn" onclick="showSection('team')">
        <i class="fas fa-users"></i>
        <span>Team</span>
    </a>
    <a href="#" class="nav-btn" onclick="showSection('history')">
        <i class="fas fa-history"></i>
        <span>History</span>
    </a>
</nav>

<!-- Overlay -->
<div id="overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000;" onclick="toggleSidebar()"></div>

</body>
</html>